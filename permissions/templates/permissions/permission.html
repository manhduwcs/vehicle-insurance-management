<!DOCTYPE html>
<html>
<head>
    <title>Phân Quyền</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-3">
        <h2>Phân Quyền cho {{ group.group_name }}</h2>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
        <form method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <h4>Chức Năng</h4>
                    <ul class="list-group">
                        {% for func in functions %}
                        <li class="list-group-item {% if func.id == selected_function.id %}active{% endif %}">
                            <a href="?function_id={{ func.id }}" class="text-decoration-none">{{ func.function_name }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                <div class="col-md-6">
                    <h4>Hành Động cho {{ selected_function.function_name|default:"Chọn chức năng" }}</h4>
                    {% if selected_function %}
                    <input type="hidden" name="function_id" value="{{ selected_function.id }}">
                    {% for action in actions %}
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" name="actions" value="{{ action.id }}" {% if action.id in selected_actions %}checked{% endif %}>
                        <label class="form-check-label">{{ action.action_name }}</label>
                    </div>
                    {% endfor %}
                    {% else %}
                    <p>Chọn một chức năng để hiển thị hành động.</p>
                    {% endif %}
                </div>
            </div>
            <div class="d-flex justify-content-end mt-3">
                <button type="submit" class="btn btn-primary me-2">Lưu</button>
                <a href="{% url 'permissions:groups_list' %}" class="btn btn-secondary">Hủy</a>
            </div>
        </form>
    </div>
</body>
</html>